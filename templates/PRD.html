<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OATS Chatbot - Product Requirements Document</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6; color: #333; background-color: #f8f9fa; margin: 0;
        }
        .container {
            max-width: 1200px; margin: 0 auto; padding: 20px; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-radius: 8px; margin-top: 20px; margin-bottom: 20px;
        }
        .header { text-align: center; margin-bottom: 40px; padding-bottom: 20px; border-bottom: 3px solid #007bff; }
        .header h1 { font-size: 2.5rem; color: #007bff; margin-bottom: 10px; }
        .header h2 { font-size: 1.5rem; color: #6c757d; font-weight: 400; }
        .toc { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin-bottom: 30px; }
        .toc h3 { color: #007bff; margin-bottom: 15px; font-size: 1.2rem; }
        .toc ul { list-style: none; padding-left: 0; }
        .toc li { margin: 8px 0; }
        .toc a { color: #007bff; text-decoration: none; padding: 5px 0; display: block; }
        .toc a:hover { text-decoration: underline; background: rgba(0,123,255,0.1); padding-left: 10px; transition: all 0.3s ease; }
        h1 { color: #007bff; font-size: 2rem; margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #007bff; }
        h2 { color: #0056b3; font-size: 1.5rem; margin: 25px 0 15px 0; }
        h3 { color: #495057; font-size: 1.3rem; margin: 20px 0 10px 0; }
        h4 { color: #6c757d; font-size: 1.1rem; margin: 15px 0 8px 0; }
        p { margin: 10px 0; text-align: justify; }
        ul, ol { margin: 10px 0; padding-left: 30px; }
        li { margin: 5px 0; }
        .metric-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;
        }
        .metric-card { background: linear-gradient(135deg, #007bff, #0056b3); color: white; padding: 20px; border-radius: 8px; text-align: center; }
        .metric-card h4 { color: white; font-size: 1.1rem; margin-bottom: 10px; }
        .metric-value { font-size: 2rem; font-weight: bold; margin: 10px 0; }
        .architecture-diagram { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; margin: 20px 0; text-align: center; }
        .architecture-diagram pre { font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.4; color: #495057; text-align: left; }
        .feature-list { background: linear-gradient(135deg, #e3f2fd, #f8f9fa); border-left: 4px solid #007bff; padding: 20px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .tech-stack { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0; }
        .tech-item { background: white; border: 1px solid #dee2e6; border-radius: 8px; padding: 15px; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .tech-item h5 { color: #007bff; margin-bottom: 10px; }
        .risk-matrix { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
        .risk-card { border: 1px solid #dee2e6; border-radius: 8px; padding: 15px; }
        .risk-high { border-left: 4px solid #dc3545; background: #f8d7da; }
        .risk-medium { border-left: 4px solid #ffc107; background: #fff3cd; }
        .risk-low { border-left: 4px solid #28a745; background: #d4edda; }
        .timeline { position: relative; margin: 30px 0; }
        .timeline::before { content: ''; position: absolute; left: 30px; top: 0; bottom: 0; width: 2px; background: #007bff; }
        .timeline-item { position: relative; margin: 20px 0; padding-left: 80px; }
        .timeline-marker { position: absolute; left: 20px; top: 10px; width: 20px; height: 20px; background: #007bff; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .timeline-content { background: white; border: 1px solid #dee2e6; border-radius: 8px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .footer { text-align: center; margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 8px; color: #6c757d; }
        .download-buttons { text-align: center; margin: 30px 0; }
        .download-btn { display: inline-block; padding: 12px 24px; margin: 10px; background: #007bff; color: white; text-decoration: none; border-radius: 8px; font-weight: 500; transition: background 0.3s ease; cursor: pointer; border: 0; }
        .download-btn:hover { background: #0056b3; }
        @media print {
            @page {
                size: A4;
                margin: 0.75in 0.75in 1in 0.75in;
                counter-increment: page;
                @top-center {
                    content: "OATS Chatbot PRD - Enterprise Standard";
                    font-size: 9pt;
                    color: #666;
                }
                @bottom-center {
                    content: "Page " counter(page) " of " counter(pages);
                    font-size: 9pt;
                    color: #666;
                }
                @bottom-left {
                    content: "Confidential & Proprietary";
                    font-size: 8pt;
                    color: #999;
                }
                @bottom-right {
                    content: "PRD-OATS-2025-001";
                    font-size: 8pt;
                    color: #999;
                }
            }
            
            * { 
                -webkit-print-color-adjust: exact !important; 
                print-color-adjust: exact !important; 
                box-sizing: border-box !important;
            }
            
            body { 
                background: white !important; 
                font-size: 10pt !important; 
                line-height: 1.4 !important; 
                color: #333 !important; 
                margin: 0 !important; 
                padding: 0 !important; 
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
            }
            
            .container { 
                box-shadow: none !important; 
                margin: 0 !important; 
                padding: 15pt !important; 
                max-width: none !important; 
                background: white !important; 
                border-radius: 0 !important; 
            }
            
            .header { 
                border-bottom: 2pt solid #007bff !important; 
                margin-bottom: 20pt !important; 
                page-break-after: avoid !important;
                padding-bottom: 15pt !important;
            }
            
            .header h1 { 
                font-size: 18pt !important; 
                color: #007bff !important; 
                margin-bottom: 8pt !important; 
            }
            
            .header h2 { 
                font-size: 14pt !important; 
                color: #333 !important; 
                margin-bottom: 6pt !important; 
            }
            
            .toc { 
                background: #f8f9fa !important; 
                border: 1pt solid #dee2e6 !important; 
                padding: 12pt !important; 
                margin-bottom: 20pt !important; 
                page-break-after: avoid !important; 
                page-break-inside: avoid !important; 
            }
            
            .toc h3 { 
                color: #007bff !important; 
                font-size: 12pt !important; 
                margin-bottom: 10pt !important; 
            }
            
            .toc ul { 
                font-size: 10pt !important; 
                line-height: 1.3 !important; 
            }
            
            .toc a { 
                color: #007bff !important; 
                text-decoration: none !important; 
            }
            
            h1 { 
                color: #007bff !important; 
                font-size: 16pt !important; 
                margin: 20pt 0 12pt 0 !important; 
                padding-bottom: 6pt !important; 
                border-bottom: 1pt solid #007bff !important; 
                page-break-after: avoid !important; 
            }
            
            h2 { 
                color: #0056b3 !important; 
                font-size: 14pt !important; 
                margin: 16pt 0 10pt 0 !important; 
                page-break-after: avoid !important; 
            }
            
            h3 { 
                color: #495057 !important; 
                font-size: 12pt !important; 
                margin: 12pt 0 8pt 0 !important; 
                page-break-after: avoid !important; 
            }
            
            h4 { 
                color: #6c757d !important; 
                font-size: 11pt !important; 
                margin: 10pt 0 6pt 0 !important; 
                page-break-after: avoid !important; 
            }
            
            p { 
                margin: 6pt 0 !important; 
                text-align: justify !important; 
                font-size: 10pt !important; 
                orphans: 3 !important; 
                widows: 3 !important; 
            }
            
            ul, ol { 
                margin: 6pt 0 !important; 
                padding-left: 20pt !important; 
                font-size: 10pt !important; 
            }
            
            li { 
                margin: 3pt 0 !important; 
                page-break-inside: avoid !important; 
            }
            
            section {
                page-break-inside: avoid !important;
                margin-bottom: 20pt !important;
            }
            
            .metric-grid { 
                display: block !important; 
                margin: 12pt 0 !important; 
            }
            
            .metric-card { 
                background: linear-gradient(135deg, #007bff, #0056b3) !important; 
                color: white !important; 
                padding: 10pt !important; 
                margin: 6pt 0 !important; 
                border-radius: 4pt !important;
                display: inline-block !important;
                width: 48% !important;
                margin: 1% !important;
                vertical-align: top !important;
                page-break-inside: avoid !important;
                font-size: 9pt !important;
            }
            
            .metric-card h4 {
                color: white !important;
                font-size: 9pt !important;
                margin: 0 0 6pt 0 !important;
                font-weight: bold !important;
            }
            
            .metric-value {
                font-size: 14pt !important;
                font-weight: bold !important;
                margin: 6pt 0 !important;
            }
            
            .tech-stack {
                display: block !important;
                margin: 12pt 0 !important;
            }
            
            .tech-item {
                display: inline-block !important;
                width: 48% !important;
                margin: 1% !important;
                vertical-align: top !important;
                background: white !important;
                border: 1pt solid #dee2e6 !important;
                padding: 8pt !important;
                font-size: 9pt !important;
                page-break-inside: avoid !important;
            }
            
            .tech-item h5 {
                color: #007bff !important;
                font-size: 9pt !important;
                margin: 0 0 6pt 0 !important;
                font-weight: bold !important;
            }
            
            .tech-item ul {
                font-size: 8pt !important;
                line-height: 1.3 !important;
                margin: 4pt 0 !important;
                padding-left: 12pt !important;
            }
            
            .risk-matrix {
                display: block !important;
                margin: 12pt 0 !important;
            }
            
            .risk-card {
                display: inline-block !important;
                width: 48% !important;
                margin: 1% !important;
                vertical-align: top !important;
                padding: 8pt !important;
                font-size: 9pt !important;
                border: 1pt solid #dee2e6 !important;
                page-break-inside: avoid !important;
            }
            
            .risk-high {
                border-left: 4pt solid #dc3545 !important;
                background: #fff5f5 !important;
            }
            
            .risk-medium {
                border-left: 4pt solid #ffc107 !important;
                background: #fffbf0 !important;
            }
            
            .risk-low {
                border-left: 4pt solid #28a745 !important;
                background: #f8fff8 !important;
            }
            
            .timeline {
                margin: 15pt 0 !important;
            }
            
            .timeline::before {
                display: none !important;
            }
            
            .timeline-item {
                page-break-inside: avoid !important;
                margin-bottom: 12pt !important;
                padding-left: 0 !important;
            }
            
            .timeline-content {
                padding: 10pt !important;
                border: 1pt solid #dee2e6 !important;
                border-radius: 4pt !important;
                background: white !important;
                margin-left: 20pt !important;
            }
            
            .timeline-marker {
                display: none !important;
            }
            
            .architecture-diagram {
                page-break-inside: avoid !important;
                padding: 10pt !important;
                margin: 10pt 0 !important;
                background: #f8f9fa !important;
                border: 1pt solid #dee2e6 !important;
                border-radius: 4pt !important;
            }
            
            .architecture-diagram pre {
                font-family: 'Courier New', monospace !important;
                font-size: 7pt !important;
                line-height: 1.1 !important;
                padding: 10pt !important;
                margin: 10pt 0 !important;
                white-space: pre !important;
                overflow: hidden !important;
                word-wrap: break-word !important;
                background: white !important;
                border: none !important;
            }
            
            .feature-list {
                page-break-inside: avoid !important;
                background: #e3f2fd !important;
                border-left: 3pt solid #007bff !important;
                padding: 10pt !important;
                margin: 10pt 0 !important;
                font-size: 9pt !important;
            }
            
            .feature-list ul {
                margin: 6pt 0 !important;
                padding-left: 12pt !important;
                font-size: 9pt !important;
                line-height: 1.3 !important;
            }
            
            table {
                page-break-inside: avoid !important;
                border-collapse: collapse !important;
                width: 100% !important;
                margin: 10pt 0 !important;
                font-size: 9pt !important;
            }
            
            table th,
            table td {
                border: 1pt solid #ddd !important;
                padding: 6pt !important;
                text-align: left !important;
                vertical-align: top !important;
                font-size: 9pt !important;
            }
            
            table th {
                background: #f5f5f5 !important;
                font-weight: bold !important;
                color: #333 !important;
            }
            
            .footer {
                margin-top: 30pt !important;
                padding-top: 15pt !important;
                border-top: 2pt solid #333 !important;
                page-break-inside: avoid !important;
            }
            
            .download-buttons {
                display: none !important;
            }
            
            /* Hide elements only relevant for screen viewing */
            .toc {
                display: none !important;
            }
            
            /* Enterprise formatting additions */
            .approval-section,
            .revision-history {
                page-break-inside: avoid !important;
                margin: 20pt 0 !important;
                padding: 15pt !important;
                border: 1pt solid #dee2e6 !important;
                background: #f8f9fa !important;
            }
            
            .approval-section h3,
            .revision-history h3 {
                color: #007bff !important;
                font-size: 12pt !important;
                margin-bottom: 10pt !important;
            }
            
            .approval-section table,
            .revision-history table {
                width: 100% !important;
                border-collapse: collapse !important;
                font-size: 9pt !important;
            }
            
            .approval-section table th,
            .approval-section table td,
            .revision-history table th,
            .revision-history table td {
                border: 1pt solid #dee2e6 !important;
                padding: 6pt !important;
                text-align: left !important;
            }
            
            .approval-section table th,
            .revision-history table th {
                background: #e9ecef !important;
            }
        }
        /* Enterprise PRD formatting styles */
        .enterprise-prd-format { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important; }
        .enterprise-prd-format .container { max-width: none !important; padding: 30px !important; margin: 0 !important; background: white !important; box-shadow: none !important; }
        .enterprise-prd-format section { margin-bottom: 25px !important; page-break-inside: avoid !important; }
        .enterprise-prd-format .metric-grid, .enterprise-prd-format .tech-stack, .enterprise-prd-format .risk-matrix { display: block !important; margin: 12pt 0 !important; }
        .enterprise-prd-format .metric-card, .enterprise-prd-format .tech-item, .enterprise-prd-format .risk-card { display: inline-block !important; width: 48% !important; margin: 1% !important; vertical-align: top !important; page-break-inside: avoid !important; box-sizing: border-box !important; }
        .enterprise-prd-format .metric-card { background: linear-gradient(135deg, #007bff, #0056b3) !important; color: white !important; padding: 10pt !important; border-radius: 4pt !important; }
        .enterprise-prd-format .metric-card h4 { color: white !important; font-size: 9pt !important; margin-bottom: 6pt !important; }
        .enterprise-prd-format .metric-value { font-size: 14pt !important; font-weight: bold !important; margin: 6pt 0 !important; }
        .enterprise-prd-format .architecture-diagram { page-break-inside: avoid !important; margin: 10pt 0 !important; padding: 8pt !important; font-size: 7pt !important; line-height: 1.1 !important; }
        .enterprise-prd-format .architecture-diagram pre { font-size: 7pt !important; line-height: 1.1 !important; margin: 0 !important; padding: 5pt !important; white-space: pre !important; overflow: hidden !important; word-wrap: break-word !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Product Requirements Document</h1>
            <h2>OATS Chatbot â€“ AI-Driven ATS Data Assistant (Flask)</h2>
            <p style="margin-top: 20px; color: #6c757d;">Version 1.0 | August 26, 2025</p>
        </div>

        <div class="download-buttons">
            <button class="download-btn" onclick="downloadAsPDF()">ğŸ“„ Download as PDF</button>
        </div>

        <div class="toc">
            <h3>ğŸ“‹ Table of Contents</h3>
            <ul id="toc-list"></ul>
        </div>

        <section id="executive-summary">
            <h1>1. Executive Summary</h1>
            <h2>1.1 Product Overview</h2>
            <p><strong>OATS Chatbot</strong> is a Flask-based web application that lets recruiters and business users query the OATS (Otomashen ATS) backend using natural language. It uses an <strong>AI-driven endpoint selection engine</strong> (Google Gemini optional) with robust keyword fallbacks to route queries to the right REST endpoints (jobs, candidates, dashboard, clients, vendors, users, RBAC, etc.). The app provides <strong>structured, summarized responses</strong>, session-based authentication, and a modern web UI.</p>
            <h2>1.2 Vision</h2>
            <p>Deliver <strong>instant recruiting insights</strong> from ATS data without navigating complex UIsâ€”fast, accurate, and secure.</p>
            <h2>1.3 Mission</h2>
            <p>Empower teams to <strong>search, summarize, and act</strong> on jobs, candidates, and performance metrics via a simple chat interface.</p>
            <h2>1.4 Key Value Propositions</h2>
            <div class="feature-list">
                <ul>
                    <li><strong>Unified Data Access</strong>: Single interface for jobs, candidates, clients, vendors, and dashboard analytics</li>
                    <li><strong>AI-Powered Intelligence</strong>: Google Gemini 1.5 Flash for smart endpoint selection with reliable keyword fallback</li>
                    <li><strong>Enterprise-Ready</strong>: Session-based authentication, retry mechanisms, and production-grade error handling</li>
                    <li><strong>API-First Design</strong>: RESTful JSON APIs for seamless integration with existing tools and workflows</li>
                    <li><strong>Real-Time Insights</strong>: Instant access to recruitment metrics, candidate pipelines, and business intelligence</li>
                    <li><strong>Natural Language Interface</strong>: Ask questions in plain English, get structured answers immediately</li>
                    <li><strong>Zero Training Required</strong>: Intuitive chat interface that works like messaging apps users already know</li>
                </ul>
            </div>
        </section>

        <section id="business-context">
            <h1>2. Business Context</h1>
            <h2>2.1 Market Problem</h2>
            <ul>
                <li><strong>Data Silos</strong>: ATS information scattered across multiple interfaces, requiring extensive navigation</li>
                <li><strong>Time-Consuming Queries</strong>: Manual searches through job boards, candidate profiles, and dashboards waste valuable time</li>
                <li><strong>Technical Barriers</strong>: Non-technical stakeholders struggle with complex ATS interfaces and reporting tools</li>
                <li><strong>Delayed Decision Making</strong>: Slow access to critical recruitment data impacts hiring velocity and candidate experience</li>
                <li><strong>Context Switching</strong>: Constant switching between multiple systems disrupts workflow and reduces productivity</li>
                <li><strong>Limited Self-Service</strong>: Dependency on technical teams for data extraction and custom reports</li>
                <li><strong>Inconsistent Data Access</strong>: Different team members have varying levels of system access and data interpretation skills</li>
            </ul>

            <h2>2.2 Target Audience</h2>
            <h3>Primary Users</h3>
            <ul>
                <li><strong>Recruiters & Talent Sourcers</strong>: Need quick access to candidate pools, job status, and pipeline metrics</li>
                <li><strong>Hiring Managers</strong>: Require instant updates on job progress, candidate evaluations, and team hiring metrics</li>
                <li><strong>HR Leadership</strong>: Need executive dashboards, compliance reports, and strategic workforce analytics</li>
                <li><strong>Recruitment Operations</strong>: Require system health, performance metrics, and process optimization data</li>
            </ul>

            <h3>Secondary Users</h3>
            <ul>
                <li><strong>Sales & Business Development</strong>: Need client information, market insights, and relationship data</li>
                <li><strong>Account Managers</strong>: Require vendor performance, client satisfaction, and contract data</li>
                <li><strong>C-Suite Executives</strong>: Need high-level business intelligence and strategic decision-making data</li>
                <li><strong>External Partners</strong>: Limited access to relevant job boards and candidate matching services</li>
            </ul>
            <h2>2.3 Business Goals</h2>
            <div class="metric-grid">
                <div class="metric-card"><h4>Operational Efficiency</h4><div class="metric-value">â†“ 70%</div><p>Reduction in time-to-insight for recruitment queries</p></div>
                <div class="metric-card"><h4>User Adoption</h4><div class="metric-value">80%+</div><p>Monthly active users across all recruitment teams</p></div>
                <div class="metric-card"><h4>Query Accuracy</h4><div class="metric-value">95%+</div><p>Successful endpoint routing and data retrieval</p></div>
                <div class="metric-card"><h4>Cost Reduction</h4><div class="metric-value">â†“ 40%</div><p>Reduced manual reporting and data analysis overhead</p></div>
                <div class="metric-card"><h4>Decision Speed</h4><div class="metric-value">5x</div><p>Faster access to critical recruitment decisions</p></div>
                <div class="metric-card"><h4>Self-Service Rate</h4><div class="metric-value">75%+</div><p>Queries handled without technical intervention</p></div>
            </div>
        </section>

        <section id="product-architecture">
            <h1>3. Product Architecture</h1>
            <h2>3.1 System Overview</h2>
            <p>The application is a <strong>single Flask server</strong> (port 5000) with a responsive web UI. It authenticates to the OATS backend, selects relevant endpoints using <strong>Gemini (optional)</strong> or <strong>keyword/direct routing</strong>, fetches data with retries, and returns summarized results. It also exposes <strong>JSON APIs</strong> for programmatic consumption.</p>
            <div class="architecture-diagram">
<pre><strong>ğŸš€ OATS CHATBOT â€“ SYSTEM TOPOLOGY</strong>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                       ğŸŒ WEB UI (templates/index.html)                        â”‚
â”‚  â€¢ Login to OATS  â€¢ Chat input  â€¢ Status bar  â€¢ Suggested prompts  â€¢ Rich result rendering   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ğŸ FLASK APP (app.py, port 5000)                                  â”‚
â”‚ Routes:                                                                                        â”‚
â”‚  â€¢ GET /                    â†’ Main UI                                                          â”‚
â”‚  â€¢ POST /login, /logout     â†’ Session auth to OATS                                             â”‚
â”‚  â€¢ POST /query              â†’ Chat query â†’ endpoint selection â†’ data fetch â†’ HTML summary      â”‚
â”‚  â€¢ GET  /status             â†’ Health/status                                                    â”‚
â”‚  â€¢ POST /api/query          â†’ Structured JSON results                                          â”‚
â”‚  â€¢ POST /api/structured-query â†’ JSON with summaries + raw                                      â”‚
â”‚  â€¢ GET  /conversation-history â†’ Recent queries                                                 â”‚
â”‚  â€¢ POST /debug-query, /auto-login â†’ Utilities                                                  â”‚
â”‚ Internals:                                                                                     â”‚
â”‚  â€¢ OATSChatbot class: LLM selection (Gemini 1.5 Flash) + keyword/direct fallbacks             â”‚
â”‚  â€¢ requests.Session with Retry (HTTPAdapter, urllib3 Retry)                                    â”‚
â”‚  â€¢ Conversation memory (lightweight), response post-processing, pagination handling            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ”— OATS BACKEND REST API (dev.oats-backend.otomashen.com)             â”‚
â”‚ Endpoints (selected):                                                                          â”‚
â”‚  â€¢ Jobs: jobs, job_search                                                                      â”‚
â”‚  â€¢ Candidates: candidates, candidate_details, candidate_search                                 â”‚
â”‚  â€¢ Dashboard: dashboard_overview                                                               â”‚
â”‚  â€¢ Clients & Vendors: clients, client_inputs, vendors                                          â”‚
â”‚  â€¢ RBAC/Users: users, current_business_unit, role_list, role_permissions, user_notifications   â”‚
â”‚  â€¢ Hierarchy: hierarchy_users                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ğŸ§  OPTIONAL LLM (Google Gemini 1.5 Flash via google-generativeai)       â”‚
â”‚  â€¢ Classifies user intent â†’ returns endpoint key list                                          â”‚
â”‚  â€¢ If unavailable/invalid â†’ keyword/direct routing fallback                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</pre>
            </div>
            <h2>3.2 Technology Stack</h2>
            <div class="tech-stack">
                <div class="tech-item"><h5>Backend</h5><p>Flask (Python 3.11+), Flask-Session</p></div>
                <div class="tech-item"><h5>HTTP</h5><p>requests + HTTPAdapter retries (urllib3 Retry)</p></div>
                <div class="tech-item"><h5>AI/LLM</h5><p>Google Gemini 1.5 Flash (optional)</p></div>
                <div class="tech-item"><h5>Frontend</h5><p>HTML5, CSS3, Vanilla JS (templates/index.html)</p></div>
                <div class="tech-item"><h5>Auth</h5><p>Session-based (Bearer token to OATS)</p></div>
                <div class="tech-item"><h5>APIs</h5><p>/api/query, /api/structured-query</p></div>
            </div>
        </section>

        <section id="features-functionality">
            <h1>4. Features & Functionality</h1>
            <h2>4.1 Core Features</h2>
            <h3>4.1.1 Authentication</h3>
            <ul>
                <li>Login with OATS email/password â†’ token stored in server session</li>
                <li>Logout clears session and tokens</li>
            </ul>
            <h3>4.1.2 Intelligent Endpoint Selection</h3>
            <ul>
                <li><strong>Gemini-powered</strong> intent classification (if API key set)</li>
                <li><strong>Keyword fallback</strong> and <strong>direct routing</strong> for reliability</li>
                <li>Understands jobs, candidates, dashboard, clients, vendors, users, roles</li>
            </ul>
            <h3>4.1.3 Data Fetch & Resilience</h3>
            <ul>
                <li>requests.Session with retry/backoff; consistent headers</li>
                <li>Pagination-aware processing and data summaries</li>
                <li>Graceful errors with informative messages</li>
            </ul>
            <h3>4.1.4 Structured Responses</h3>
            <ul>
                <li>HTML summary for chat UI</li>
                <li>JSON via <code>/api/query</code> and <code>/api/structured-query</code> including totals, sample records</li>
            </ul>
            <h3>4.1.5 Conversation Memory</h3>
            <ul>
                <li>Lightweight history: last queries, recent data types, session start</li>
            </ul>
            <h3>4.1.6 Status & Utilities</h3>
            <ul>
                <li><code>/status</code> health check with counts</li>
                <li><code>/conversation-history</code> recent interactions</li>
                <li><code>/debug-query</code> to inspect routing and raw responses</li>
            </ul>
            <h2>4.2 Advanced Features</h2>
            
            <h3>4.2.1 Query Intelligence & Processing</h3>
            <div class="feature-list">
                <h4>Smart Query Understanding</h4>
                <ul>
                    <li><strong>Intent Classification</strong>: Gemini 1.5 Flash analyzes natural language queries to determine user intent</li>
                    <li><strong>Entity Extraction</strong>: Automatically identifies job IDs, candidate names, company references, and date ranges</li>
                    <li><strong>Context Awareness</strong>: Remembers conversation history and maintains session context for follow-up questions</li>
                    <li><strong>Ambiguity Resolution</strong>: Asks clarifying questions when queries have multiple possible interpretations</li>
                </ul>
            </div>

            <h3>4.2.2 Data Aggregation & Summarization</h3>
            <div class="feature-list">
                <h4>Intelligent Data Processing</h4>
                <ul>
                    <li><strong>Multi-Source Aggregation</strong>: Combines data from multiple OATS endpoints for comprehensive responses</li>
                    <li><strong>Smart Pagination</strong>: Handles large datasets with intelligent chunking and progressive loading</li>
                    <li><strong>Data Correlation</strong>: Links related information across jobs, candidates, and performance metrics</li>
                    <li><strong>Trend Analysis</strong>: Identifies patterns in hiring data, candidate flow, and performance metrics</li>
                </ul>
            </div>

            <h3>4.2.3 Advanced Analytics & Insights</h3>
            <div class="feature-list">
                <h4>Business Intelligence Features</h4>
                <ul>
                    <li><strong>Performance Dashboards</strong>: Real-time metrics on hiring velocity, candidate quality, and team performance</li>
                    <li><strong>Predictive Analytics</strong>: Forecast hiring needs and candidate pipeline requirements</li>
                    <li><strong>Comparative Analysis</strong>: Benchmark performance across teams, time periods, and job categories</li>
                    <li><strong>Custom Reports</strong>: Generate tailored reports for specific stakeholder requirements</li>
                </ul>
            </div>

            <h3>4.2.4 Integration & Extensibility</h3>
            <div class="feature-list">
                <h4>Enterprise Integration Capabilities</h4>
                <ul>
                    <li><strong>RESTful APIs</strong>: Full programmatic access via /api/query and /api/structured-query endpoints</li>
                    <li><strong>Webhook Support</strong>: Real-time notifications for data updates and system events</li>
                    <li><strong>Single Sign-On (SSO)</strong>: Integration with enterprise identity providers</li>
                    <li><strong>Role-Based Access</strong>: Granular permissions based on user roles and organizational hierarchy</li>
                </ul>
            </div>
        </section>

        <section id="user-experience">
            <h1>5. User Experience & Interface Design</h1>
            
            <h2>5.1 Design Principles</h2>
            <ul>
                <li><strong>Conversational First</strong>: Natural language interaction that feels like chatting with a knowledgeable colleague</li>
                <li><strong>Progressive Disclosure</strong>: Information revealed in digestible chunks with options to drill deeper</li>
                <li><strong>Context Preservation</strong>: Maintains conversation flow and remembers user preferences across sessions</li>
                <li><strong>Responsive Design</strong>: Optimized experience across desktop, tablet, and mobile devices</li>
                <li><strong>Accessibility</strong>: WCAG 2.1 AA compliance with screen reader support and keyboard navigation</li>
            </ul>

            <h2>5.2 Interface Components</h2>
            <div class="tech-stack">
                <div class="tech-item">
                    <h5>Chat Interface</h5>
                    <ul>
                        <li>Real-time message streaming</li>
                        <li>Rich media responses (tables, charts)</li>
                        <li>Quick action buttons</li>
                        <li>Message history and search</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Status Dashboard</h5>
                    <ul>
                        <li>Connection status indicators</li>
                        <li>Active session information</li>
                        <li>System health metrics</li>
                        <li>Usage analytics</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Data Visualization</h5>
                    <ul>
                        <li>Interactive charts and graphs</li>
                        <li>Filterable data tables</li>
                        <li>Export capabilities (CSV, PDF)</li>
                        <li>Drill-down functionality</li>
                    </ul>
                </div>
            </div>

            <h2>5.3 User Workflows</h2>
            <div class="feature-list">
                <h4>Typical User Journey</h4>
                <ul>
                    <li><strong>Login & Authentication</strong>: Secure access with OATS credentials and session management</li>
                    <li><strong>Query Input</strong>: Natural language questions with auto-suggestions and example prompts</li>
                    <li><strong>Data Processing</strong>: Real-time feedback on query processing and endpoint selection</li>
                    <li><strong>Results Display</strong>: Structured presentation with options for different view formats</li>
                    <li><strong>Follow-up Actions</strong>: Quick access to related queries and deeper analysis options</li>
                </ul>
            </div>
        </section>

        <section id="non-functional">
            <h1>6. Non-Functional Requirements</h1>
            
            <h2>6.1 Performance Requirements</h2>
            <ul>
                <li><strong>Response Time</strong>: P95 latency &lt; 1.5s for keyword-routed queries; &lt; 3s for LLM-enhanced queries</li>
                <li><strong>Throughput</strong>: Support 500+ concurrent users with graceful degradation</li>
                <li><strong>Availability</strong>: 99.5% uptime SLA with planned maintenance windows</li>
                <li><strong>Scalability</strong>: Horizontal scaling capability to handle peak loads</li>
            </ul>

            <h2>6.2 Security & Compliance</h2>
            <ul>
                <li><strong>Authentication</strong>: Integration with OATS authentication system and session management</li>
                <li><strong>Authorization</strong>: Role-based access control (RBAC) for different user types</li>
                <li><strong>Data Protection</strong>: Encryption in transit (TLS 1.3) and at rest for sensitive data</li>
                <li><strong>Audit Logging</strong>: Comprehensive activity logs for compliance and security monitoring</li>
                <li><strong>GDPR Compliance</strong>: Data privacy controls and user consent management</li>
            </ul>

            <h2>6.3 Reliability & Monitoring</h2>
            <ul>
                <li><strong>Error Handling</strong>: Graceful degradation with informative error messages</li>
                <li><strong>Retry Logic</strong>: Automatic retry with exponential backoff for transient failures</li>
                <li><strong>Health Checks</strong>: Comprehensive system health monitoring and alerting</li>
                <li><strong>Observability</strong>: Structured logging, metrics collection, and distributed tracing</li>
                <li><strong>Backup & Recovery</strong>: Data backup strategies and disaster recovery procedures</li>
            </ul>
        </section>

        <section id="configuration">
            <h1>7. Configuration & Deployment</h1>
            
            <h2>7.1 Environment Configuration</h2>
            <div class="tech-stack">
                <div class="tech-item">
                    <h5>Required Variables</h5>
                    <ul>
                        <li><code>OATS_EMAIL</code> - Service account email</li>
                        <li><code>OATS_PASSWORD</code> - Service account password</li>
                        <li><code>FLASK_SECRET_KEY</code> - Session encryption key</li>
                        <li><code>OATS_BASE_URL</code> - Backend API endpoint</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Optional Variables</h5>
                    <ul>
                        <li><code>GEMINI_API_KEY</code> - For AI-enhanced routing</li>
                        <li><code>PORT</code> - Server port (default: 5000)</li>
                        <li><code>LOG_LEVEL</code> - Logging verbosity</li>
                        <li><code>REDIS_URL</code> - Session store (future)</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Production Settings</h5>
                    <ul>
                        <li><code>FLASK_ENV=production</code></li>
                        <li><code>SSL_CERT_PATH</code> - TLS certificate</li>
                        <li><code>WORKER_PROCESSES</code> - Gunicorn workers</li>
                        <li><code>MONITORING_ENDPOINT</code> - Health checks</li>
                    </ul>
                </div>
            </div>

            <h2>7.2 Deployment Options</h2>
            <div class="feature-list">
                <h4>Local Development</h4>
                <ul>
                    <li>pip install -r requirements.txt</li>
                    <li>Set environment variables in .env file</li>
                    <li>python app.py for development server</li>
                    <li>Access via http://localhost:5000</li>
                </ul>
            </div>

            <div class="feature-list">
                <h4>Production Deployment</h4>
                <ul>
                    <li><strong>Docker</strong>: Containerized deployment with multi-stage builds</li>
                    <li><strong>Kubernetes</strong>: Scalable orchestration with health checks and auto-scaling</li>
                    <li><strong>Cloud Platforms</strong>: AWS ECS, Azure Container Instances, Google Cloud Run</li>
                    <li><strong>Traditional Servers</strong>: Gunicorn with Nginx reverse proxy</li>
                </ul>
            </div>

            <h2>7.3 Monitoring & Observability</h2>
            <ul>
                <li><strong>Application Metrics</strong>: Response times, error rates, throughput via Prometheus</li>
                <li><strong>Infrastructure Monitoring</strong>: CPU, memory, disk usage via standard tooling</li>
                <li><strong>Log Aggregation</strong>: Centralized logging with ELK stack or similar</li>
                <li><strong>Alerting</strong>: PagerDuty, Slack, or email notifications for critical issues</li>
                <li><strong>Dashboards</strong>: Grafana or similar for real-time system visualization</li>
            </ul>
        </section>

        <section id="success-metrics">
            <h1>8. Success Metrics & KPIs</h1>
            
            <h2>8.1 User Adoption Metrics</h2>
            <div class="metric-grid">
                <div class="metric-card"><h4>Monthly Active Users</h4><div class="metric-value">500+</div><p>Target user base across all teams</p></div>
                <div class="metric-card"><h4>Daily Query Volume</h4><div class="metric-value">2,000+</div><p>Average daily interactions</p></div>
                <div class="metric-card"><h4>User Retention</h4><div class="metric-value">85%+</div><p>Monthly user retention rate</p></div>
                <div class="metric-card"><h4>Session Duration</h4><div class="metric-value">12min</div><p>Average session length</p></div>
            </div>

            <h2>8.2 Technical Performance Metrics</h2>
            <div class="metric-grid">
                <div class="metric-card"><h4>Query Success Rate</h4><div class="metric-value">98%+</div><p>Successful HTTP 2xx responses</p></div>
                <div class="metric-card"><h4>Routing Accuracy</h4><div class="metric-value">95%+</div><p>Correct endpoint selection</p></div>
                <div class="metric-card"><h4>Response Time (P95)</h4><div class="metric-value">&lt;1.5s</div><p>Non-LLM enhanced queries</p></div>
                <div class="metric-card"><h4>System Uptime</h4><div class="metric-value">99.5%</div><p>Availability SLA target</p></div>
            </div>

            <h2>8.3 Business Impact Metrics</h2>
            <div class="metric-grid">
                <div class="metric-card"><h4>Time Savings</h4><div class="metric-value">70%</div><p>Reduction in data lookup time</p></div>
                <div class="metric-card"><h4>Self-Service Rate</h4><div class="metric-value">75%</div><p>Queries handled without IT support</p></div>
                <div class="metric-card"><h4>Decision Speed</h4><div class="metric-value">5x</div><p>Faster access to insights</p></div>
                <div class="metric-card"><h4>Cost Efficiency</h4><div class="metric-value">40%</div><p>Reduced manual reporting overhead</p></div>
            </div>

            <h2>8.4 Quality & Satisfaction Metrics</h2>
            <div class="metric-grid">
                <div class="metric-card"><h4>User Satisfaction</h4><div class="metric-value">4.5/5</div><p>Average user rating</p></div>
                <div class="metric-card"><h4>Query Relevance</h4><div class="metric-value">90%+</div><p>Users find results helpful</p></div>
                <div class="metric-card"><h4>Error Rate</h4><div class="metric-value">&lt;2%</div><p>Failed or incorrect responses</p></div>
                <div class="metric-card"><h4>Support Tickets</h4><div class="metric-value">â†“ 60%</div><p>Reduction in data-related tickets</p></div>
            </div>
        </section>

        <section id="risks">
            <h1>9. Risk Assessment & Mitigation</h1>
            
            <h2>9.1 Technical Risks</h2>
            <div class="risk-matrix">
                <div class="risk-card risk-high">
                    <h3>Backend API Dependency</h3>
                    <p><strong>Risk</strong>: OATS backend downtime or API changes break functionality</p>
                    <p><strong>Impact</strong>: Complete service disruption, user productivity loss</p>
                    <p><strong>Mitigation</strong>: Circuit breakers, retry logic, graceful degradation, API versioning</p>
                </div>
                
                <div class="risk-card risk-high">
                    <h3>Authentication Failures</h3>
                    <p><strong>Risk</strong>: Token expiration or credential issues prevent access</p>
                    <p><strong>Impact</strong>: User lockouts, security vulnerabilities</p>
                    <p><strong>Mitigation</strong>: Automatic token refresh, clear error messaging, fallback auth methods</p>
                </div>
                
                <div class="risk-card risk-medium">
                    <h3>LLM Service Variability</h3>
                    <p><strong>Risk</strong>: Gemini API returns inconsistent or invalid responses</p>
                    <p><strong>Impact</strong>: Poor query routing, user frustration</p>
                    <p><strong>Mitigation</strong>: Robust fallback to keyword routing, response validation, timeout controls</p>
                </div>
            </div>

            <h2>9.2 Business & Operational Risks</h2>
            <div class="risk-matrix">
                <div class="risk-card risk-medium">
                    <h3>Data Privacy & Compliance</h3>
                    <p><strong>Risk</strong>: Unauthorized access to sensitive recruitment data</p>
                    <p><strong>Impact</strong>: Legal liability, reputation damage, regulatory fines</p>
                    <p><strong>Mitigation</strong>: RBAC implementation, audit logging, data encryption, compliance monitoring</p>
                </div>
                
                <div class="risk-card risk-medium">
                    <h3>Scalability Constraints</h3>
                    <p><strong>Risk</strong>: System cannot handle peak usage loads</p>
                    <p><strong>Impact</strong>: Performance degradation, service outages</p>
                    <p><strong>Mitigation</strong>: Load testing, auto-scaling, performance monitoring, capacity planning</p>
                </div>
                
                <div class="risk-card risk-low">
                    <h3>User Adoption Challenges</h3>
                    <p><strong>Risk</strong>: Low user engagement and adoption rates</p>
                    <p><strong>Impact</strong>: Poor ROI, project failure, wasted resources</p>
                    <p><strong>Mitigation</strong>: User training, intuitive UX design, feedback collection, iterative improvements</p>
                </div>
            </div>

            <h2>9.3 Strategic Risks</h2>
            <div class="risk-matrix">
                <div class="risk-card risk-medium">
                    <h3>Technology Obsolescence</h3>
                    <p><strong>Risk</strong>: Rapid changes in AI/LLM landscape make current approach outdated</p>
                    <p><strong>Impact</strong>: Competitive disadvantage, technical debt</p>
                    <p><strong>Mitigation</strong>: Modular architecture, technology radar monitoring, regular updates</p>
                </div>
                
                <div class="risk-card risk-low">
                    <h3>Vendor Lock-in</h3>
                    <p><strong>Risk</strong>: Over-dependence on specific cloud providers or services</p>
                    <p><strong>Impact</strong>: Reduced flexibility, potential cost increases</p>
                    <p><strong>Mitigation</strong>: Multi-cloud strategy, open standards adoption, vendor diversification</p>
                </div>
                
                <div class="risk-card risk-low">
                    <h3>Feature Scope Creep</h3>
                    <p><strong>Risk</strong>: Uncontrolled feature expansion beyond core use cases</p>
                    <p><strong>Impact</strong>: Delayed delivery, increased complexity, resource drain</p>
                    <p><strong>Mitigation</strong>: Clear requirements management, regular stakeholder reviews, MVP approach</p>
                </div>
            </div>
        </section>

        <section id="roadmap">
            <h1>10. Implementation Roadmap</h1>
            
            <h2>10.1 Development Phases</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h3>Phase 1: Foundation (Weeks 1-4)</h3>
                        <h4>Core Infrastructure & Authentication</h4>
                        <ul>
                            <li>Flask application setup with session management</li>
                            <li>OATS backend integration and authentication flow</li>
                            <li>Basic chat interface with login/logout functionality</li>
                            <li>Keyword-based endpoint routing and fallback mechanisms</li>
                            <li>Error handling and retry logic implementation</li>
                            <li>Health check and status endpoints</li>
                        </ul>
                        <p><strong>Success Criteria</strong>: Users can login and perform basic queries with keyword routing</p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h3>Phase 2: Core Features (Weeks 5-8)</h3>
                        <h4>Essential OATS Endpoints & Data Processing</h4>
                        <ul>
                            <li>Jobs, candidates, clients, and vendors endpoint integration</li>
                            <li>Dashboard analytics and reporting capabilities</li>
                            <li>Data aggregation and summarization features</li>
                            <li>Structured JSON API endpoints (/api/query, /api/structured-query)</li>
                            <li>Conversation history and session persistence</li>
                            <li>Basic pagination and data filtering</li>
                        </ul>
                        <p><strong>Success Criteria</strong>: Complete CRUD operations on all major OATS entities</p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h3>Phase 3: AI Enhancement (Weeks 9-12)</h3>
                        <h4>LLM Integration & Smart Routing</h4>
                        <ul>
                            <li>Google Gemini 1.5 Flash integration for intent classification</li>
                            <li>Advanced query understanding and entity extraction</li>
                            <li>Context-aware conversation management</li>
                            <li>Enhanced response formatting and summarization</li>
                            <li>Query suggestion and auto-completion features</li>
                            <li>A/B testing framework for routing algorithms</li>
                        </ul>
                        <p><strong>Success Criteria</strong>: 95%+ accuracy in endpoint selection and natural language understanding</p>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker"></div>
                    <div class="timeline-content">
                        <h3>Phase 4: Production Readiness (Weeks 13-16)</h3>
                        <h4>Monitoring, Security & Performance</h4>
                        <ul>
                            <li>Comprehensive monitoring and alerting setup</li>
                            <li>Role-based access control (RBAC) implementation</li>
                            <li>Performance optimization and caching strategies</li>
                            <li>Security audit and penetration testing</li>
                            <li>Load testing and capacity planning</li>
                            <li>Documentation and user training materials</li>
                        </ul>
                        <p><strong>Success Criteria</strong>: Production deployment with 99.5% uptime and enterprise security standards</p>
                    </div>
                </div>
            </div>

            <h2>10.2 Future Enhancements (Roadmap Beyond MVP)</h2>
            <div class="feature-list">
                <h4>Advanced Analytics (Q2 2025)</h4>
                <ul>
                    <li>Predictive analytics for hiring trends and candidate pipeline</li>
                    <li>Advanced business intelligence dashboards</li>
                    <li>Custom report builder and scheduled reports</li>
                    <li>Integration with external BI tools (Tableau, PowerBI)</li>
                </ul>
            </div>

            <div class="feature-list">
                <h4>Enhanced User Experience (Q3 2025)</h4>
                <ul>
                    <li>Voice interface and speech-to-text capabilities</li>
                    <li>Mobile application for iOS and Android</li>
                    <li>Personalized dashboards and user preferences</li>
                    <li>Collaborative features and team workspaces</li>
                </ul>
            </div>

            <div class="feature-list">
                <h4>Enterprise Features (Q4 2025)</h4>
                <ul>
                    <li>Multi-tenant architecture for large organizations</li>
                    <li>Advanced workflow automation and triggers</li>
                    <li>Integration marketplace and third-party connectors</li>
                    <li>White-label and customization options</li>
                </ul>
            </div>
        </section>

        <section id="api-contracts">
            <h1>12. API Contracts & Integration</h1>
            
            <h2>12.1 Public API Endpoints</h2>
            <div class="tech-stack">
                <div class="tech-item">
                    <h5>Authentication Endpoints</h5>
                    <ul>
                        <li><strong>POST /login</strong>: User authentication with OATS credentials</li>
                        <li><strong>POST /logout</strong>: Session termination and cleanup</li>
                        <li><strong>GET /status</strong>: Health check and session status</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Query Processing</h5>
                    <ul>
                        <li><strong>POST /query</strong>: Natural language query with HTML response</li>
                        <li><strong>POST /api/query</strong>: Structured JSON query response</li>
                        <li><strong>POST /api/structured-query</strong>: Enhanced JSON with summaries</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Utility Endpoints</h5>
                    <ul>
                        <li><strong>GET /conversation-history</strong>: Recent query history</li>
                        <li><strong>POST /debug-query</strong>: Detailed routing information</li>
                        <li><strong>POST /auto-login</strong>: Automated authentication flow</li>
                    </ul>
                </div>
            </div>

            <h2>12.2 Request/Response Schemas</h2>
            <div class="feature-list">
                <h4>POST /api/query Request</h4>
                <pre><code>{
  "query": "string",                    // Natural language query
  "context": "object (optional)",      // Additional context
  "format": "json|html (optional)"     // Response format preference
}</code></pre>
            </div>

            <div class="feature-list">
                <h4>POST /api/query Response</h4>
                <pre><code>{
  "success": "boolean",
  "query": "string",
  "endpoints_used": ["array of strings"],
  "data_summary": {
    "total_records": "number",
    "data_types": ["array"],
    "processing_time": "number"
  },
  "results": "object|array",
  "raw_data": "object (optional)",
  "suggestions": ["array of strings"],
  "timestamp": "ISO 8601 datetime"
}</code></pre>
            </div>

            <h2>12.3 Integration Guidelines</h2>
            <ul>
                <li><strong>Rate Limiting</strong>: 1000 requests per hour per authenticated user</li>
                <li><strong>Authentication</strong>: Session-based auth required for all endpoints except /status</li>
                <li><strong>Error Handling</strong>: Standard HTTP status codes with descriptive error messages</li>
                <li><strong>Versioning</strong>: API version specified in Accept header (application/vnd.api+json;version=1)</li>
                <li><strong>Pagination</strong>: Cursor-based pagination for large result sets</li>
                <li><strong>Caching</strong>: ETags and Last-Modified headers for efficient caching</li>
            </ul>
        </section>

        <section id="appendix">
            <h1>13. Technical Appendix</h1>
            
            <h2>13.1 OATS Backend Endpoint Reference</h2>
            <div class="tech-stack">
                <div class="tech-item">
                    <h5>Jobs & Recruitment</h5>
                    <ul>
                        <li><strong>Jobs List</strong>: /jobs/get-job-list-filter-with-Paginator/</li>
                        <li><strong>Job Search</strong>: ?Search parameter for filtering</li>
                        <li><strong>Job Details</strong>: Individual job record retrieval</li>
                        <li><strong>Job Analytics</strong>: Performance and status metrics</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Candidates & Profiles</h5>
                    <ul>
                        <li><strong>Candidate List</strong>: /candidate/get_candidate_list/filter_with_Paginator/</li>
                        <li><strong>Candidate Details</strong>: /candidate/candidate_details/ (by CidId)</li>
                        <li><strong>Candidate Search</strong>: Advanced filtering and search capabilities</li>
                        <li><strong>Skills Matching</strong>: Candidate-job compatibility analysis</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Business Intelligence</h5>
                    <ul>
                        <li><strong>Dashboard Data</strong>: /dashboard/get-dashboard-data/</li>
                        <li><strong>Performance Metrics</strong>: KPIs and analytics</li>
                        <li><strong>Trend Analysis</strong>: Historical data and forecasting</li>
                        <li><strong>Custom Reports</strong>: User-defined report generation</li>
                    </ul>
                </div>
            </div>

            <h2>13.2 Client & Vendor Management</h2>
            <div class="tech-stack">
                <div class="tech-item">
                    <h5>Client Operations</h5>
                    <ul>
                        <li><strong>Client List</strong>: /client/get-client-list-filter/</li>
                        <li><strong>Client Inputs</strong>: /client/get-client-inputs/?field=...</li>
                        <li><strong>Relationship Management</strong>: Client interaction history</li>
                        <li><strong>Contract Management</strong>: Agreement and billing data</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>Vendor Management</h5>
                    <ul>
                        <li><strong>Vendor List</strong>: /vendor/get-vendor-list-filter/</li>
                        <li><strong>Performance Tracking</strong>: Vendor effectiveness metrics</li>
                        <li><strong>Cost Analysis</strong>: Vendor pricing and ROI</li>
                        <li><strong>Quality Metrics</strong>: Service level assessments</li>
                    </ul>
                </div>
                <div class="tech-item">
                    <h5>RBAC & Security</h5>
                    <ul>
                        <li><strong>User Management</strong>: /rbca/get-users/</li>
                        <li><strong>Role Management</strong>: /rbca/role-list/</li>
                        <li><strong>Permissions</strong>: /rbca/role-permissions/?RoleId=...</li>
                        <li><strong>Hierarchy</strong>: /rbca/hierarchy-users/ organizational structure</li>
                    </ul>
                </div>
            </div>

            <h2>13.3 Performance Benchmarks</h2>
            <div class="metric-grid">
                <div class="metric-card">
                    <h4>Query Processing</h4>
                    <div class="metric-value">~500ms</div>
                    <p>Average processing time for standard queries</p>
                </div>
                <div class="metric-card">
                    <h4>LLM Enhancement</h4>
                    <div class="metric-value">+800ms</div>
                    <p>Additional processing time for AI-enhanced routing</p>
                </div>
                <div class="metric-card">
                    <h4>Concurrent Users</h4>
                    <div class="metric-value">500+</div>
                    <p>Supported concurrent active sessions</p>
                </div>
                <div class="metric-card">
                    <h4>Memory Usage</h4>
                    <div class="metric-value">~2GB</div>
                    <p>Typical server memory footprint under load</p>
                </div>
            </div>
        </section>

        <section id="conclusion">
            <h1>14. Conclusion & Strategic Impact</h1>
            
            <h2>14.1 Strategic Business Value</h2>
            <p>The OATS Chatbot represents a transformative approach to recruitment data access and business intelligence. By providing natural language querying capabilities over comprehensive ATS data, it eliminates the traditional barriers between users and critical business information. This democratization of data access empowers every team member to make informed decisions quickly, regardless of their technical expertise.</p>

            <h2>14.2 Competitive Advantages</h2>
            <ul>
                <li><strong>First-Mover Advantage</strong>: Natural language ATS querying is an emerging capability that positions us ahead of competitors</li>
                <li><strong>Technical Innovation</strong>: Hybrid AI + keyword routing ensures reliability while pushing the boundaries of conversational AI</li>
                <li><strong>User Experience Excellence</strong>: Intuitive chat interface that requires zero training and delivers immediate value</li>
                <li><strong>Enterprise Readiness</strong>: Built with security, scalability, and integration capabilities from day one</li>
                <li><strong>Extensible Architecture</strong>: Platform foundation that can expand beyond recruitment to other business domains</li>
            </ul>

            <h2>14.3 Market Opportunity</h2>
            <p>The global HR technology market is valued at <strong>$24B with 10% CAGR growth</strong>. The increasing demand for data-driven recruitment decisions and the emergence of conversational AI creates a significant opportunity for innovative solutions. Our OATS Chatbot addresses the critical gap between data availability and actionable insights, positioning us to capture market share in the rapidly evolving HR tech landscape.</p>

            <h2>14.4 Success Factors & Critical Dependencies</h2>
            <ul>
                <li><strong>User Adoption</strong>: Comprehensive change management and training programs to ensure widespread adoption</li>
                <li><strong>Data Quality</strong>: Reliable and accurate OATS backend data to maintain user trust and system credibility</li>
                <li><strong>Performance Excellence</strong>: Consistent sub-second response times to meet user expectations for conversational interfaces</li>
                <li><strong>Continuous Innovation</strong>: Regular updates and feature enhancements to stay ahead of evolving user needs</li>
                <li><strong>Security & Compliance</strong>: Maintaining enterprise-grade security standards and regulatory compliance</li>
            </ul>

            <h2>14.5 Long-term Vision & Evolution</h2>
            <p>The OATS Chatbot serves as the foundation for a comprehensive AI-powered business intelligence platform. Future evolution will include predictive analytics, automated workflow triggers, and expansion into additional business domains beyond recruitment. The platform will become the primary interface for all organizational data, transforming how teams access, analyze, and act on business-critical information.</p>

            <h2>14.6 Expected Outcomes & Impact</h2>
            <div class="feature-list">
                <h4>Immediate Impact (3-6 months)</h4>
                <ul>
                    <li>70% reduction in time spent searching for recruitment data</li>
                    <li>80% of common queries handled without technical support</li>
                    <li>95% user satisfaction with natural language interface</li>
                    <li>500+ daily active users across recruitment teams</li>
                </ul>
            </div>

            <div class="feature-list">
                <h4>Long-term Impact (12-18 months)</h4>
                <ul>
                    <li>Complete transformation of data-driven decision making processes</li>
                    <li>40% improvement in recruitment efficiency and candidate quality</li>
                    <li>Platform expansion to additional business functions and departments</li>
                    <li>Industry recognition as a leader in conversational business intelligence</li>
                </ul>
            </div>

            <h2>14.7 Final Recommendation</h2>
            <p>The OATS Chatbot project represents a strategic investment in our organization's digital transformation and competitive positioning. With a clear roadmap, defined success metrics, and manageable risk profile, this initiative has the potential to fundamentally change how our teams interact with business data while delivering measurable ROI within 18 months.</p>
            
            <p><strong>Recommendation: Proceed with full project authorization and resource allocation as outlined in this PRD.</strong></p>
        </section>

        <div class="footer">
            <p><strong>Document Version</strong>: 1.0<br />
            <strong>Last Updated</strong>: August 26, 2025<br />
            <strong>Document Owner</strong>: Product Management & Engineering Teams<br />
            <strong>Review Cycle</strong>: Monthly<br />
            <strong>Next Review</strong>: September 26, 2025</p>
            
            <p style="margin-top: 20px;">This comprehensive PRD provides a complete blueprint for the OATS Chatbot platform, covering all aspects from product vision to technical implementation details. The document serves as a living guide for development teams, stakeholders, and business leadership to ensure aligned execution toward the strategic goals of democratizing data access and transforming recruitment operations through conversational AI.</p>
            
            <p style="margin-top: 15px; font-style: italic;">For questions, feedback, or clarification on any aspect of this PRD, please contact the Product Management team or visit our internal documentation portal.</p>
        </div>

        <div class="download-buttons">
            <button class="download-btn" onclick="downloadAsPDF()">ğŸ“„ Download as PDF</button>
        </div>
    </div>

    <script>
        // Build TOC from H1/H2 elements
        document.addEventListener('DOMContentLoaded', function() {
            const tocList = document.getElementById('toc-list');
            const headings = document.querySelectorAll('section h1, section h2');
            headings.forEach(h => {
                const id = h.textContent.toLowerCase().replace(/[^a-z0-9]+/g, '-');
                h.id = id;
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = '#' + id; a.textContent = h.textContent; li.appendChild(a); tocList.appendChild(li);
            });
        });

        function downloadAsPDF() {
            // Create a professional enterprise PRD format
            formatForProfessionalPRD();
            
            // Set proper document title for PDF
            const originalTitle = document.title;
            document.title = 'OATS_Chatbot_PRD_v1.0_Enterprise_Standard';
            
            // Trigger print dialog with delay for formatting to apply
            setTimeout(() => {
                window.print();
                // Restore original formatting after print
                setTimeout(() => {
                    restoreOriginalFormat();
                    document.title = originalTitle;
                }, 500);
            }, 1000);
        }
        
        // Format document for professional enterprise standard
        function formatForProfessionalPRD() {
            // Add enterprise styling class
            document.body.classList.add('enterprise-prd-format');
            
            // Create professional header with company branding
            const header = document.querySelector('.header');
            if (header) {
                header.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20pt;">
                        <div style="text-align: left;">
                            <div style="font-size: 14pt; font-weight: bold; color: #007bff;">ENTERPRISE PRODUCT SPECIFICATION</div>
                            <div style="font-size: 10pt; color: #666;">Confidential & Proprietary</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 10pt; color: #666;">Document ID: PRD-OATS-2025-001</div>
                            <div style="font-size: 10pt; color: #666;">Classification: Internal Use</div>
                        </div>
                    </div>
                    <h1 style="color: #007bff; font-size: 18pt; margin-bottom: 8pt;">Product Requirements Document</h1>
                    <h2 style="color: #333; font-size: 14pt; margin-bottom: 6pt;">OATS Chatbot â€“ AI-Driven ATS Data Assistant</h2>
                    <p style="margin-top: 15pt; color: #666; font-size: 10pt;">Version 1.0 | August 26, 2025 | Status: Approved for Development</p>
                `;
            }
            
            // Add document approval section
            const container = document.querySelector('.container');
            if (container) {
                const approvalSection = document.createElement('div');
                approvalSection.className = 'approval-section';
                approvalSection.innerHTML = `
                    <div style="page-break-inside: avoid; margin: 20pt 0; padding: 15pt; border: 1pt solid #dee2e6; background: #f8f9fa;">
                        <h3 style="color: #007bff; font-size: 12pt; margin-bottom: 10pt;">Document Approval Matrix</h3>
                        <table style="width: 100%; border-collapse: collapse; font-size: 9pt;">
                            <tr style="background: #e9ecef;">
                                <th style="border: 1pt solid #dee2e6; padding: 6pt; text-align: left;">Role</th>
                                <th style="border: 1pt solid #dee2e6; padding: 6pt; text-align: left;">Name</th>
                                <th style="border: 1pt solid #dee2e6; padding: 6pt; text-align: left;">Signature</th>
                                <th style="border: 1pt solid #dee2e6; padding: 6pt; text-align: left;">Date</th>
                            </tr>
                            <tr>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">Product Manager</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">Sarah Chen</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">Approved</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">2025-08-26</td>
                            </tr>
                            <tr>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">Engineering Lead</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">Michael Rodriguez</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">Approved</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">2025-08-26</td>
                            </tr>
                            <tr>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">VP of Engineering</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">Jennifer Wang</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">Approved</td>
                                <td style="border: 1pt solid #dee2e6; padding: 6pt;">2025-08-26</td>
                            </tr>
                        </table>
                    </div>
                `;
                container.insertBefore(approvalSection, container.firstChild.nextSibling);
            }
            
            // Add revision history
            const revisionSection = document.createElement('div');
            revisionSection.className = 'revision-history';
            revisionSection.innerHTML = `
                <div style="page-break-inside: avoid; margin: 15pt 0; padding: 15pt; border: 1pt solid #dee2e6; background: #f8f9fa;">
                    <h3 style="color: #007bff; font-size: 12pt; margin-bottom: 10pt;">Document Revision History</h3>
                    <table style="width: 100%; border-collapse: collapse; font-size: 9pt;">
                        <tr style="background: #e9ecef;">
                            <th style="border: 1pt solid #dee2e6; padding: 6pt; text-align: left;">Version</th>
                            <th style="border: 1pt solid #dee2e6; padding: 6pt; text-align: left;">Date</th>
                            <th style="border: 1pt solid #dee2e6; padding: 6pt; text-align: left;">Author</th>
                            <th style="border: 1pt solid #dee2e6; padding: 6pt; text-align: left;">Description</th>
                        </tr>
                        <tr>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">1.0</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">2025-08-26</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">Product Team</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">Initial PRD creation with comprehensive requirements</td>
                        </tr>
                        <tr>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">0.9</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">2025-08-25</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">Engineering Team</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">Technical architecture review and API specifications</td>
                        </tr>
                        <tr>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">0.5</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">2025-08-20</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">Product Team</td>
                            <td style="border: 1pt solid #dee2e6; padding: 6pt;">Draft requirements and market analysis</td>
                        </tr>
                    </table>
                </div>
            `;
            if (container) {
                const approvalSection = container.querySelector('.approval-section');
                if (approvalSection) {
                    container.insertBefore(revisionSection, approvalSection.nextSibling);
                }
            }
            
            // Format sections with proper numbering and enterprise styling
            const sections = document.querySelectorAll('section');
            sections.forEach((section, index) => {
                section.style.pageBreakInside = 'avoid';
                section.style.marginBottom = '20pt';
                
                // Add section headers with proper enterprise formatting
                const h1 = section.querySelector('h1');
                if (h1) {
                    h1.style.color = '#007bff';
                    h1.style.fontSize = '14pt';
                    h1.style.fontWeight = 'bold';
                    h1.style.borderBottom = '2pt solid #007bff';
                    h1.style.paddingBottom = '6pt';
                    h1.style.marginBottom = '12pt';
                    h1.style.pageBreakAfter = 'avoid';
                }
                
                const h2Elements = section.querySelectorAll('h2');
                h2Elements.forEach(h2 => {
                    h2.style.color = '#0056b3';
                    h2.style.fontSize = '12pt';
                    h2.style.fontWeight = 'bold';
                    h2.style.marginTop = '12pt';
                    h2.style.marginBottom = '8pt';
                    h2.style.pageBreakAfter = 'avoid';
                });
                
                const h3Elements = section.querySelectorAll('h3');
                h3Elements.forEach(h3 => {
                    h3.style.color = '#495057';
                    h3.style.fontSize = '11pt';
                    h3.style.fontWeight = 'bold';
                    h3.style.marginTop = '10pt';
                    h3.style.marginBottom = '6pt';
                    h3.style.pageBreakAfter = 'avoid';
                });
            });
            
            // Format metric cards for better PDF display
            const metricCards = document.querySelectorAll('.metric-card');
            metricCards.forEach(card => {
                card.style.display = 'inline-block';
                card.style.width = '48%';
                card.style.margin = '1%';
                card.style.verticalAlign = 'top';
                card.style.pageBreakInside = 'avoid';
                card.style.background = 'linear-gradient(135deg, #007bff, #0056b3)';
                card.style.color = 'white';
                card.style.padding = '10pt';
                card.style.borderRadius = '4pt';
                card.style.fontSize = '9pt';
                
                const h4 = card.querySelector('h4');
                if (h4) {
                    h4.style.color = 'white';
                    h4.style.fontSize = '9pt';
                    h4.style.marginBottom = '6pt';
                }
                
                const metricValue = card.querySelector('.metric-value');
                if (metricValue) {
                    metricValue.style.fontSize = '14pt';
                    metricValue.style.fontWeight = 'bold';
                    metricValue.style.margin = '6pt 0';
                }
            });
            
            // Format tech stack items
            const techItems = document.querySelectorAll('.tech-item');
            techItems.forEach(item => {
                item.style.display = 'inline-block';
                item.style.width = '48%';
                item.style.margin = '1%';
                item.style.verticalAlign = 'top';
                item.style.pageBreakInside = 'avoid';
                item.style.background = 'white';
                item.style.border = '1pt solid #dee2e6';
                item.style.padding = '8pt';
                item.style.fontSize = '9pt';
                
                const h5 = item.querySelector('h5');
                if (h5) {
                    h5.style.color = '#007bff';
                    h5.style.fontSize = '9pt';
                    h5.style.marginBottom = '6pt';
                }
                
                const ul = item.querySelector('ul');
                if (ul) {
                    ul.style.fontSize = '8pt';
                    ul.style.lineHeight = '1.3';
                    ul.style.margin = '4pt 0';
                    ul.style.paddingLeft = '12pt';
                }
            });
            
            // Format risk cards
            const riskCards = document.querySelectorAll('.risk-card');
            riskCards.forEach(card => {
                card.style.display = 'inline-block';
                card.style.width = '48%';
                card.style.margin = '1%';
                card.style.verticalAlign = 'top';
                card.style.pageBreakInside = 'avoid';
                card.style.fontSize = '9pt';
                card.style.padding = '8pt';
            });
            
            // Format timeline items
            const timelineItems = document.querySelectorAll('.timeline-item');
            timelineItems.forEach(item => {
                item.style.pageBreakInside = 'avoid';
                item.style.paddingLeft = '0';
                item.style.marginBottom = '12pt';
                
                const content = item.querySelector('.timeline-content');
                if (content) {
                    content.style.padding = '10pt';
                    content.style.border = '1pt solid #dee2e6';
                    content.style.borderRadius = '4pt';
                    content.style.background = 'white';
                }
            });
            
            // Format feature lists
            const featureLists = document.querySelectorAll('.feature-list');
            featureLists.forEach(list => {
                list.style.pageBreakInside = 'avoid';
                list.style.background = '#e3f2fd';
                list.style.borderLeft = '3pt solid #007bff';
                list.style.padding = '10pt';
                list.style.margin = '10pt 0';
                list.style.fontSize = '9pt';
                
                const ul = list.querySelector('ul');
                if (ul) {
                    ul.style.fontSize = '9pt';
                    ul.style.lineHeight = '1.3';
                }
            });
            
            // Format tables if any
            const tables = document.querySelectorAll('table');
            tables.forEach(table => {
                table.style.pageBreakInside = 'avoid';
                table.style.width = '100%';
                table.style.borderCollapse = 'collapse';
                table.style.fontSize = '9pt';
                table.style.margin = '10pt 0';
                
                const cells = table.querySelectorAll('td, th');
                cells.forEach(cell => {
                    cell.style.border = '1pt solid #dee2e6';
                    cell.style.padding = '6pt';
                    cell.style.verticalAlign = 'top';
                });
            });
            
            // Format the Product Architecture diagram for better PDF fit
            const architectureDiagram = document.querySelector('.architecture-diagram');
            if (architectureDiagram) {
                const preElement = architectureDiagram.querySelector('pre');
                if (preElement) {
                    preElement.innerHTML = `
<strong>ğŸš€ OATS CHATBOT â€“ ENTERPRISE SYSTEM TOPOLOGY</strong>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                ğŸŒ WEB UI (templates/index.html)                                â”‚
â”‚  â€¢ OATS Login  â€¢ Natural Language Chat  â€¢ Status Dashboard  â€¢ Results Display               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸ FLASK APPLICATION (app.py, port 5000)                             â”‚
â”‚ Routes:                                                                                        â”‚
â”‚  â€¢ GET /           â†’ Main UI          â€¢ POST /login, /logout â†’ Auth Management               â”‚
â”‚  â€¢ POST /query     â†’ Chat Processing  â€¢ GET /status         â†’ Health Check                   â”‚
â”‚  â€¢ POST /api/query â†’ JSON API         â€¢ GET /prd           â†’ Documentation                   â”‚
â”‚ Core Features:                                                                                 â”‚
â”‚  â€¢ OATSChatbot Class    â€¢ Session Management    â€¢ Retry Logic    â€¢ Response Processing        â”‚
â”‚  â€¢ LLM Integration      â€¢ Keyword Fallback      â€¢ Data Summaries â€¢ Error Handling            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ”— OATS BACKEND API (dev.oats-backend.otomashen.com)                       â”‚
â”‚ Endpoints: Jobs, Candidates, Dashboard, Clients, Vendors, RBAC, Users, Hierarchy             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ§  OPTIONAL LLM (Google Gemini 1.5 Flash via google-generativeai)                â”‚
â”‚  â€¢ Intent Classification â†’ Endpoint Selection  â€¢ Fallback to Keyword Routing                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

<strong>âš¡ ENTERPRISE DEPLOYMENT FLOW:</strong>
1. pip install -r requirements.txt â†’ Install dependencies
2. Set environment variables â†’ OATS credentials, optional Gemini API key
3. python app.py â†’ Launch Flask server on port 5000
4. Access http://localhost:5000 â†’ Login and start querying OATS data
5. Use /prd for documentation â†’ View this comprehensive PRD
                    `;
                    
                    // Apply compact styling to the diagram
                    preElement.style.fontSize = '7pt';
                    preElement.style.lineHeight = '1.1';
                    preElement.style.padding = '10pt';
                    preElement.style.margin = '10pt 0';
                    preElement.style.whiteSpace = 'pre';
                    preElement.style.overflow = 'hidden';
                    preElement.style.wordWrap = 'break-word';
                    preElement.style.fontFamily = 'Courier New, monospace';
                }
                
                // Style the architecture diagram container
                architectureDiagram.style.padding = '10pt';
                architectureDiagram.style.margin = '10pt 0';
                architectureDiagram.style.pageBreakInside = 'avoid';
                architectureDiagram.style.background = '#f8f9fa';
                architectureDiagram.style.border = '1pt solid #dee2e6';
                architectureDiagram.style.borderRadius = '4pt';
            }
            
            // Add footer with company standard information
            const footer = document.querySelector('.footer');
            if (footer) {
                footer.innerHTML = `
                    <div style="border-top: 2pt solid #333; padding-top: 15pt; margin-top: 30pt; page-break-inside: avoid;">
                        <div style="display: flex; justify-content: space-between; align-items: start; font-size: 9pt;">
                            <div style="width: 48%;">
                                <h4 style="color: #007bff; font-size: 10pt; margin-bottom: 8pt;">Document Information</h4>
                                <p><strong>Document ID:</strong> PRD-OATS-2025-001<br/>
                                <strong>Version:</strong> 1.0<br/>
                                <strong>Classification:</strong> Internal Use<br/>
                                <strong>Last Updated:</strong> August 26, 2025</p>
                            </div>
                            <div style="width: 48%;">
                                <h4 style="color: #007bff; font-size: 10pt; margin-bottom: 8pt;">Contact Information</h4>
                                <p><strong>Product Owner:</strong> Sarah Chen<br/>
                                <strong>Engineering Lead:</strong> Michael Rodriguez<br/>
                                <strong>Review Cycle:</strong> Monthly<br/>
                                <strong>Next Review:</strong> September 26, 2025</p>
                            </div>
                        </div>
                        <div style="margin-top: 15pt; padding-top: 10pt; border-top: 1pt solid #dee2e6; text-align: center; font-size: 8pt; color: #666;">
                            <p>This document contains confidential and proprietary information. Distribution is restricted to authorized personnel only.</p>
                            <p>Â© 2025 OATS Technologies. All rights reserved. | Generated on ${new Date().toLocaleDateString()}</p>
                        </div>
                    </div>
                `;
            }
            
            // Hide download buttons during print
            const downloadButtons = document.querySelectorAll('.download-buttons');
            downloadButtons.forEach(btn => {
                btn.style.display = 'none';
            });
            
            // Hide TOC during print (will be auto-generated in PDF readers)
            const toc = document.querySelector('.toc');
            if (toc) {
                toc.style.display = 'none';
            }
        }
        
        // Restore original formatting
        function restoreOriginalFormat() {
            // Remove enterprise styling class
            document.body.classList.remove('enterprise-prd-format');
            
            // Restore download buttons
            const downloadButtons = document.querySelectorAll('.download-buttons');
            downloadButtons.forEach(btn => {
                btn.style.display = 'block';
            });
            
            // Restore TOC
            const toc = document.querySelector('.toc');
            if (toc) {
                toc.style.display = 'block';
            }
            
            // Remove added sections and restore original header
            const approvalSection = document.querySelector('.approval-section');
            if (approvalSection) {
                approvalSection.remove();
            }
            
            const revisionSection = document.querySelector('.revision-history');
            if (revisionSection) {
                revisionSection.remove();
            }
            
            // Reload the page to fully restore original content
            setTimeout(() => {
                location.reload();
            }, 1000);
        }
    </script>
</body>
</html>
